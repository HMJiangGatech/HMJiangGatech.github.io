{{ define "main" }}

<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

<div class="posts">


  <div class="post nopadding-child nomargin-child row">

    <div class="home-sidebar">

          {{ with .Params.Cover }}
          <img src="{{ . | absURL }}" class="post-cover nopadding-child" />
          {{ end }}
          <h1>{{.Title}}</h1>
          {{ with .Params.subtitle  }}
          <span class="subtitle">{{.}}</span>
          {{ end  }}
          {{ with .Params.email  }}
          <span class="subtitle"><b>Email: </b> <a href="mailto:{{.}}">{{.}}</a></span><br>
          {{ end  }}
          {{ with .Params.github  }}
          <span class="subtitle"><b>Github: </b> <a href="https://github.com/{{.}}/">{{.}}</a></span><br>
          {{ end  }}
          {{ with .Params.twitter  }}
          <span class="subtitle"><a href="https://twitter.com/{{.}}/"><b><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
  <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
</svg> Twitter </b></a></span> <br>
          {{ end  }}
          {{ with .Params.zhihu  }}
          <a href="https://www.zhihu.com/people/{{.}}/"><b> <i class="fab fa-zhihu"></i> Zhihu </b></a> <br>
          {{ end  }}
    </div>

    {{- with .Content -}}
      <div class="home-main">
        {{ . | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)" `${1}<a href="#${2}" class="hanchor" ariaLabel="Anchor">&#8983;</a> ${3}` | safeHTML }}
      </div>
    {{- end -}}

  </div>

{{ range $.Site.Menus.main }}
  {{ if (and (not .HasChildren) (in $.Site.Params.showSections .Identifier))}}
    <h1 class="post-title"><a href="{{ .URL }}">{{ .Name | markdownify }}</a></h1>
    {{ with $.Site.GetPage .URL }}
    {{- with .Content -}}
      <div class="post nopadding-child nomargin-child">
        {{ . | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)" `${1}<a href="#${2}" class="hanchor" ariaLabel="Anchor">&#8983;</a> ${3}` | safeHTML }}
      </div>
    {{- end -}}
    {{ end }}
  {{ end }}
{{ end }}

  {{ $isntDefault := not (or (eq (trim $.Site.Params.contentTypeName " ") "posts") (eq (trim $.Site.Params.contentTypeName " ") "")) }}
  {{ $contentTypeName := cond $isntDefault (string $.Site.Params.contentTypeName) "posts" }}

  {{ $paginator := .Paginate (where .Site.RegularPages "Type" $contentTypeName) }}

  {{ if .Site.Params.showNews }}
  <h1 class="post-title">
    <a href="{{ .Site.Params.News.Url }}">{{ .Site.Params.News.Name | markdownify }}</a></h1>
  {{ range $paginator.Pages }}
  <div class="post on-list">

    <h2 class="post-title list-title" style="display:inline">
      <a href="{{ .Permalink }}">{{ .Title | markdownify }}</a></h2>
    <div class="post-meta" style="display:inline">
      <span class="post-date">
        {{ .Date.Format "2006-01-02" }}
      </span>
    </div>

    {{ if .Params.tags }}
    <span class="post-tags">
      {{ range .Params.tags }}
      #<a href="{{ (urlize (printf "tags/%s/" . )) | absLangURL }}">
        {{- . -}}
      </a>&nbsp;
      {{ end }}
    </span>
    {{ end }}

    {{ with .Params.Cover }}
    <img src="{{ . | absURL }}" class="post-cover" />
    {{ end }}

    <div class="post-content">
      {{ if .Params.showFullContent }}
      {{ .Content | markdownify }}
      {{ else if .Description }}
      {{ .Description | markdownify }}
      {{ else }}
      {{ if .Truncated }}
      {{ .Summary | markdownify }}
      {{ end }}
      {{ end }}
    </div>

    {{ if not .Params.showFullContent }}
    <div>
      <a class="read-more button"
        href="{{.RelPermalink}}">{{ $.Site.Params.ReadMore }} â†’</a>
    </div>
    {{ end }}
  </div>
  {{ end }}
  {{ end }}
  {{ partial "pagination.html" . }}
</div>
{{ end }}
